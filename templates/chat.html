<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chat Room</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.min.js"></script>
</head>
<body>
  <script type="text/javascript">
    $(document).ready(function(){
        console.log('http://' + document.domain + ':' + location.port)
        var socket = io.connect('http://' + document.domain + ':' + location.port);

        socket.on('connect', function(){
                var connect_string = 'new_connect';
                socket.send(connect_string);
        });

        socket.on('message', function(msg){
                // console.log(type(msg));
                $('#messages').append('<li>' + msg.message + '</li>');
        });

        $('#sendbutton').on('click', function(){
                socket.send($('#myMessage').val());
                $('#myMessage').val('');
        });
    });
  </script>
  <ul id="messages">{{message|safe}}</ul>
  <input type="text" id="myMessage">
  <button id="sendbutton">Send</button>
</body>
</html>